module qls/desugar

imports
	include/QL
	
strategies
	qls-desugar-all = alltd(qls-desugar)
	
rules
	
	qls-desugar:
		StyleDef(s, ss) -> StyleDef(s, <qls-desugar-style-uses> ss)

	qls-desguar:
		StyledRef(q, Styles(ss)) -> StyledRef(q, Styles(<qls-desugar-style-uses> ss))

	qls-desugar-style-uses =
		partition(?StyleRef(<id>)) => (uses, decls);
		<not(?[])> uses;
		flatten-list;
		qsort(string-lt);
		map(!StyleRef(<id>));
		<conc> (<id>, decls)
